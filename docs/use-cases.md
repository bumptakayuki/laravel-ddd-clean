# ユースケース記述（Use Case Description）

## UC-01：エリアを選択する

**関連コンテキスト：** Area Context（Generic）

**概要：** ユーザーは配達可能な店舗・弁当を絞り込むために、利用エリアを選択する。

**主アクター：**
* User

**事前条件：**
* システムが利用可能である

**基本フロー：**
1. ユーザーはエリア選択画面を開く
2. ユーザーは利用したいエリアを選択する
3. システムは選択されたエリアを現在の利用エリアとして保持する

**事後条件：**
* 現在の利用エリアが確定している

---

## UC-02：店舗を検索する

**関連コンテキスト：** Store Context（Supporting）

**概要：** ユーザーは選択したエリア内で利用可能な店舗を検索する。

**主アクター：**
* User

**事前条件：**
* 利用エリアが選択されている

**基本フロー：**
1. ユーザーは店舗検索を実行する
2. システムはエリア条件を元に店舗一覧を取得する
3. システムは店舗一覧をユーザーに表示する

**事後条件：**
* 店舗一覧が表示されている

---

## UC-03：Box Lunch を閲覧・選択する

**関連コンテキスト：** Box Lunch Context（Core Domain）

**概要：** ユーザーは店舗が提供する Box Lunch を閲覧し、購入対象を選択する。

**主アクター：**
* User

**事前条件：**
* 店舗が選択されている

**基本フロー：**
1. ユーザーは店舗の Box Lunch 一覧を閲覧する
2. ユーザーは任意の Box Lunch を選択する
3. システムは Box Lunch の詳細情報を表示する

**事後条件：**
* 選択された Box Lunch が特定されている

---

## UC-04：Box Lunch のオプションを選択する

**関連コンテキスト：** Box Lunch Context（Core Domain）

**概要：** ユーザーは Box Lunch に付随するオプションを選択する。

**主アクター：**
* User

**事前条件：**
* Box Lunch が選択されている

**基本フロー：**
1. ユーザーは利用可能なオプションを確認する
2. ユーザーはオプションを選択する
3. システムは選択結果を Box Lunch の構成として保持する

**事後条件：**
* Box Lunch の構成が確定している

---

## UC-05：注文を作成する

**関連コンテキスト：** Order Context（Supporting）

**概要：** ユーザーは選択した Box Lunch を元に注文を作成する。

**主アクター：**
* User

**事前条件：**
* Box Lunch の構成が確定している
* ユーザーがログインしている

**基本フロー：**
1. ユーザーは注文を確定する
2. システムは注文情報を生成する
3. 注文は「未決済」状態として保存される

**事後条件：**
* 注文が作成されている

---

## UC-06：決済を実行する

**関連コンテキスト：** Payment Context（Supporting）

**概要：** ユーザーは注文に対して決済を行う。

**主アクター：**
* User
* 外部決済サービス

**事前条件：**
* 注文が作成されている

**基本フロー：**
1. ユーザーは決済方法を選択する
2. システムは決済処理を外部サービスに依頼する
3. 決済が成功する

**代替フロー：**
* 3a. 決済が失敗した場合、注文は未決済のままとなる

**事後条件：**
* 決済成功時：注文が「決済済み」状態になる
* 決済失敗時：注文状態は変更されない

---

## UC-07：注文を受注する

**関連コンテキスト：** Acceptance Context（Supporting）

**概要：** 決済が完了した注文を店舗が受注する。

**主アクター：**
* System（自動処理）
* Store Operator

**事前条件：**
* 注文が決済済みである

**基本フロー：**
1. システムは決済完了イベントを検知する
2. システムは店舗へ注文情報を通知する
3. 注文は「受注済み」状態になる

**事後条件：**
* 注文が受注済みとして記録される

---

## UC-08：購入を確定する

**関連コンテキスト：** Purchase Context（Supporting）

**概要：** 注文の受注が完了し、購入が正式に確定する。

**主アクター：**
* System

**事前条件：**
* 注文が受注済みである

**基本フロー：**
1. システムは購入確定処理を実行する
2. 購入情報が保存される
3. 購入確定通知がユーザーへ送信される

**事後条件：**
* 購入が確定している

---

## UC-09：注文履歴を参照する

**関連コンテキスト：** Order History Context（Supporting）

**概要：** ユーザーは自身の過去の注文履歴を確認する。

**主アクター：**
* User

**事前条件：**
* ユーザーがログインしている

**基本フロー：**
1. ユーザーは注文履歴画面を開く
2. システムはユーザーの注文履歴を取得する
3. 注文履歴が表示される

**事後条件：**
* 注文履歴が参照可能である

---

## UC-10：お気に入りを管理する

**関連コンテキスト：** Favorite Context（Generic）

**概要：** ユーザーは Box Lunch や店舗をお気に入りとして管理する。

**主アクター：**
* User

**基本フロー：**
1. ユーザーはお気に入りに追加または削除を行う
2. システムはお気に入り情報を保存する

**事後条件：**
* お気に入り状態が更新されている

